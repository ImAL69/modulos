<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Material Didáctico: Bloque 2</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Roboto:wght@300;400;500;700&display=swap');
    @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css');

    body { background-color: #f0f2f5; margin: 0; padding: 40px 20px; font-family: 'Roboto', sans-serif; color: #37474f; line-height: 1.8; }

    .container-extended {
        max-width: 1000px; margin: 0 auto; padding: 60px 50px; background: #ffffff;
        border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); position: relative;
        overflow: hidden; border-top: 8px solid #1565c0;
    }

    .uni-logo { position: absolute; top: 30px; right: 40px; width: 160px; height: auto; z-index: 100; padding: 5px; background: #fff; border-radius: 8px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
    .uni-logo:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 8px 24px rgba(0,0,0,0.15); }

    .header-box { text-align: left; margin-bottom: 60px; padding-top: 40px; padding-right: 180px; padding-left: 20px; border-bottom: 1px solid #e0e0e0; padding-bottom: 30px; }
    .main-title { font-family: 'Montserrat', sans-serif; font-size: 2.2rem; font-weight: 800; color: #0d47a1; margin: 0 0 15px 0; }

    /* ACORDEÓN MEJORADO */
    details {
        background: #f5faff; margin-bottom: 25px; border-radius: 12px; border: 1px solid #bbdefb;
        box-shadow: 0 2px 5px rgba(0,0,0,0.02);
    }
    summary {
        padding: 25px; cursor: pointer; font-weight: 700; color: #1565c0; font-size: 1.1rem;
        display: flex; align-items: center; list-style: none; font-family: 'Montserrat', sans-serif;
    }
    summary i { margin-right: 15px; font-size: 1.5rem; }
    summary:hover { background: #e3f2fd; }
    
    .details-content { padding: 30px; background: #fff; border-top: 1px solid #bbdefb; line-height: 1.8; }

    .code-block {
        background: #263238; color: #eceff1; padding: 20px; border-radius: 8px; 
        font-family: 'Courier New', monospace; overflow-x: auto; margin: 20px 0; font-size: 0.95rem; line-height: 1.5;
        border-left: 5px solid #ff9800;
    }

    .checklist-list { list-style: none; padding: 0; }
    .checklist-list li { margin-bottom: 15px; padding-left: 30px; position: relative; }
    .checklist-list li::before { content: '✓'; color: #2e7d32; font-weight: bold; position: absolute; left: 0; font-size: 1.2rem; }

    /* Imagen ilustrativa */
    .feature-img { display:block; max-width:100%; height:auto; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,0.08); margin:20px auto; }
    .img-caption { text-align:center; color:#546e7a; font-size:0.9rem; margin-top:8px; }

    @media (max-width: 768px) {
        .uni-logo { position: static; display: block; margin: 0 auto 20px auto; }
        .header-box { padding-right: 20px; text-align: center; }
    }
</style>
</head>
<body>

<div class="container-extended">
    <img src="https://www.dropbox.com/scl/fi/j7mrxq795h9ekhifpcink/logo.png?rlkey=bsh9h5f98pd67n3bfejh368vk&st=8gcmg5vx&raw=1" alt="Logo FET" class="uni-logo">

    <div class="header-box">
        <h1 class="main-title">Material Didáctico - Bloque 2</h1>
        <p>Guía Técnica de Implementación: Transformación y Partición</p>
    </div>

    <figure>
        <img class="feature-img" src="https://www.dropbox.com/scl/fi/kzg76ff4nxdv2suldsz00/Gemini_Generated_Image_d78rxqd78rxqd78r.png?rlkey=cy8scnm4dxza9r3cj1r7zfq4f&st=lx9xtkmy&raw=1" alt="Perrito ilustrando la transformación de datos y preparación para modelado" />
        <figcaption class="img-caption">Semana 2: Transformación y Partición — prepara tus datos con rigor.</figcaption>
    </figure>

    <!-- RECURSO 1: NOTEBOOK GUÍA -->
    <details>
        <summary><i class="fa-brands fa-python"></i> Guía de Código: Partición y Escalado Seguro</summary>
        <div class="details-content">
            <p>Este script muestra la forma correcta de preparar los datos evitando la fuga de información (Data Leakage). Observa cómo el <code>StandardScaler</code> se ajusta (<code>fit</code>) SOLO con los datos de entrenamiento y luego se usa para transformar tanto entrenamiento como prueba.</p>
            <div class="code-block">
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler, OneHotEncoder

# 1. Cargar Datos y Separar Variables
# Supongamos un CSV de logs de red
df = pd.read_csv('cybersecurity_logs.csv')
X = df.drop('is_attack', axis=1)  # Variables predictoras (Features)
y = df['is_attack']               # Variable objetivo (Target)

# 2. Partición Estratificada (Crucial en seguridad)
# stratify=y asegura que la proporción de ataques se mantenga igual en ambos sets
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42, stratify=y
)

# 3. Escalado Seguro (Sin Fuga de Datos)
scaler = StandardScaler()

# ¡OJO! fit solo en X_train. Aquí el scaler "aprende" la media y desviación.
X_train_scaled = scaler.fit_transform(X_train) 

# En X_test solo hacemos transform (usamos la media/std de train)
X_test_scaled = scaler.transform(X_test)  

print(f"Datos de Entrenamiento: {X_train_scaled.shape}")
print(f"Datos de Prueba: {X_test_scaled.shape}")
            </div>
        </div>
    </details>

    <!-- RECURSO 2: PLANTILLA DATA QUALITY -->
    <details>
        <summary><i class="fa-solid fa-table"></i> Estructura del Reporte de Calidad de Datos</summary>
        <div class="details-content">
            <p>Para la Actividad 2, tu informe debe documentar el estado de los datos "Antes" y "Después" de tu intervención. Utiliza esta estructura:</p>
            <ul class="checklist-list">
                <li><strong>Diagnóstico de Nulos:</strong> Listar columnas afectadas. Justificar la decisión técnica (¿Imputar con media? ¿Imputar con 'Desconocido'? ¿Borrar fila?).</li>
                <li><strong>Tratamiento de Outliers:</strong> ¿Se detectaron valores extremos? ¿Se aplicó winsorización o transformación logarítmica? ¿Por qué?</li>
                <li><strong>Transformación de Variables:</strong> Detallar qué variables categóricas se pasaron a numéricas y qué método se usó (One-Hot vs Label).</li>
                <li><strong>Balance de Clases:</strong> Mostrar el porcentaje de casos positivos (ataques) vs negativos (tráfico normal) en el set de entrenamiento.</li>
            </ul>
        </div>
    </details>

    <!-- RECURSO 3: MINI RETOS -->
    <details>
        <summary><i class="fa-solid fa-puzzle-piece"></i> Mini-Retos de Preparación (Práctica)</summary>
        <div class="details-content">
            <p>Resuelve estos problemas conceptuales antes de entregar tu taller:</p>
            <div style="background:#fff3e0; padding:15px; border-left:4px solid #ef6c00; margin-bottom:15px;">
                <strong>Reto 1: El Nulo Fantasma</strong><br>
                En la columna 'Puerto', algunos valores aparecen como -1 o 99999. Esto no es un número válido, es un código de error de la herramienta de captura. Encuéntralos y reemplázalos por NaN antes de imputar.
            </div>
            <div style="background:#e8f5e9; padding:15px; border-left:4px solid #2e7d32; margin-bottom:15px;">
                <strong>Reto 2: La Categoría Rara</strong><br>
                La variable 'País de Origen' tiene 150 países, pero 140 de ellos aparecen menos de 5 veces. Si haces One-Hot Encoding, crearás 150 columnas inútiles que ralentizan el modelo. Solución: Agrupa esos 140 países en una categoría "Otros" antes de codificar.
            </div>
        </div>
    </details>

</div>

</body>
</html>